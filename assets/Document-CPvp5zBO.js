const __vite__fileDeps=["assets/MarkdownFetcher-gmodyR7C.js","assets/index-D_WYXwkw.js","assets/index-DbsohFW3.css","assets/MarkdownRenderer-Czm4yfLa.js","assets/MarkdownRenderer-AdK9jpo8.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r,_,u as A,j as e,a as p,L as T}from"./index-D_WYXwkw.js";const R=r.lazy(()=>_(()=>import("./MarkdownFetcher-gmodyR7C.js"),__vite__mapDeps([0,1,2,3,4]))),q=({file:o,title:j,fold:i,type:h,desc:$,writer:y,firstDate:C,lastDate:E,isTocOpen:S,toggleMobile:L,setBreadcrumbData:f})=>{const[b,u]=r.useState(""),[m,v]=r.useState([]),[N,w]=r.useState(""),c=A(),[k,g]=r.useState(""),[I,d]=r.useState([]);r.useEffect(()=>{(async()=>{if(!h){console.warn("Type is not available yet");return}const s=sessionStorage.getItem(`${h}Structure`);if(s){const n=JSON.parse(s);v(n),d(n);return}try{const a=await fetch(`/moc-design-docs/data/${h}Structure.json`);if(!a.ok)throw new Error("Error loading document structure");const l=await a.json();v(l),d(l)}catch(n){console.error("Error fetching document structure:",n)}})()},[h]),r.useEffect(()=>{(async()=>{if(!i||!o){console.warn("Fold or file is not available yet");return}try{const n=await fetch(`/moc-design-docs/documents/${i}/${o}.md`);if(n.ok){const a=await n.text();u(a)}else u("Error loading content")}catch{u("Error loading content")}})(),window.scrollTo(0,0)},[o,i]),r.useEffect(()=>{const t=()=>{w(window.location.hash.replace("#",""))};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}},[]),r.useEffect(()=>{f({path:c.pathname.split("/").filter(Boolean).map(s=>decodeURIComponent(s)),title:j})},[c.pathname,f,j]),r.useEffect(()=>{const t=()=>{const s=Array.from(document.querySelectorAll(".main-page-content h2")),n=window.scrollY+window.innerHeight/2-100;let a="";for(const l of s)if(l.offsetTop<=n)a=l.id;else break;w(a)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]);const D=`${i}-${o}`;r.useEffect(()=>{c.hash&&(()=>{const s=document.querySelector(`[href="${c.hash}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"start"})})()},[c.pathname,c.hash]);const x=t=>{const s=decodeURIComponent(c.pathname.split("/").slice(2).join("/")),n=decodeURIComponent(t);return s===n},F=t=>{const s=t.target.value;if(g(s),s.trim()==="")d(m);else{const n=m.filter(a=>a.title.toLowerCase().includes(s.toLowerCase())||a.children&&a.children.some(l=>l.title.toLowerCase().includes(s.toLowerCase())));d(n)}},P=()=>{var t,s;g(""),d(m),(t=document.getElementById("sidebar-filter-input"))==null||t.classList.remove("is-active"),(s=document.getElementById("sidebar-filter-input"))==null||s.classList.add("false")},W=()=>{var t,s;(t=document.getElementById("sidebar-filter-input"))==null||t.classList.add("is-active"),(s=document.getElementById("sidebar-filter-input"))==null||s.classList.remove("false")};return e.jsxs("div",{className:"main-wrapper",children:[e.jsxs("div",{className:"sidebar-container",children:[e.jsxs("aside",{className:`sidebar ${S?"is-expanded":""}`,id:"sidebar-quicklinks","data-macro":"LearnSidebar",children:[e.jsx("button",{type:"button",className:"button action backdrop","aria-label":"Collapse sidebar",onClick:L,children:e.jsx("span",{className:"button-wrap"})}),e.jsxs("nav",{className:"sidebar-inner","aria-label":"Related Topics",children:[e.jsx("header",{className:"sidebar-actions",children:e.jsx("section",{className:"sidebar-filter-container",children:e.jsxs("div",{className:"sidebar-filter",children:[e.jsxs("label",{htmlFor:"sidebar-filter-input",id:"sidebar-filter-label",className:"sidebar-filter-label",children:[e.jsx("span",{className:"icon icon-filter"}),e.jsx("span",{className:"visually-hidden",children:"Filter Sidebar"})]}),e.jsx("input",{type:"text",id:"sidebar-filter-input",className:"sidebar-filter-input-field",placeholder:"Filter",value:k,onChange:F,onFocus:W}),e.jsx("button",{type:"button",className:"button action has-icon clear-sidebar-filter-button",onClick:P,children:e.jsxs("span",{className:"button-wrap",children:[e.jsx("span",{className:"icon icon-cancel"}),e.jsx("span",{className:"visually-hidden",children:"Clear filter input"})]})})]})})}),e.jsxs("div",{className:"sidebar-inner-nav",children:[e.jsx("div",{className:"in-nav-toc",children:e.jsx("div",{className:"document-toc-container",children:e.jsxs("section",{className:"document-toc",children:[e.jsx("header",{children:e.jsx("h2",{className:"document-toc-heading",children:"In this Article"})}),e.jsx("ul",{className:"document-toc-list",children:b.split(`
`).filter(t=>t.startsWith("##")).map((t,s)=>{const n=t.replace(/#/g,"").trim(),a=t.startsWith("####")?"visually-hidden":t.startsWith("###")?"h3":t.startsWith("##")?"h2":"";return e.jsx("li",{className:"document-toc-item",children:e.jsx("a",{href:`#${n}`,className:`document-toc-link ${a}`,"aria-current":N===n?"true":void 0,children:n})},s)})})]})})}),e.jsx("div",{className:"sidebar-body",children:e.jsx("ol",{children:I.map(t=>e.jsxs("div",{children:[e.jsx("li",{className:"section",children:e.jsx(p,{to:`/${i}/${t.title}`,"aria-current":x(`${t.title}`)?"page":void 0,children:t.title})}),e.jsx("li",{children:t.children&&t.children.length>0&&e.jsxs("details",{open:!0,children:[e.jsx("summary",{children:t.title}),e.jsx("ol",{children:t.children.map(s=>e.jsxs("div",{children:[e.jsx("li",{children:e.jsx(p,{to:`/${i}/${t.title}/${s.title}`,"aria-current":x(`${t.title}/${s.title}`)?"page":void 0,children:s.title})},s.title),e.jsx("li",{children:s.children&&s.children.length>0&&e.jsxs("details",{open:!0,children:[e.jsx("summary",{children:s.title}),e.jsx("ol",{children:s.children.map(n=>e.jsx("li",{children:e.jsx(p,{to:`/${i}/${t.title}/${s.title}/${n.title}`,"aria-current":x(`${t.title}/${s.title}/${n.title}`)?"page":void 0,children:n.title})},n.title))})]})})]},s.title))})]})})]},t.title))})})]}),e.jsx("section",{className:"place side"})]})]}),e.jsxs("div",{className:"toc-container",children:[e.jsx("aside",{className:"toc",children:e.jsx("nav",{children:e.jsx("div",{className:"document-toc-container",children:e.jsxs("section",{className:"document-toc",children:[e.jsx("header",{children:e.jsx("h2",{className:"document-toc-heading",children:"In this Article"})}),e.jsx("ul",{className:"document-toc-list",children:b.split(`
`).filter(t=>t.startsWith("##")).map((t,s)=>{const n=t.replace(/#/g,"").trim(),a=t.startsWith("####")?"visually-hidden":t.startsWith("###")?"h3":t.startsWith("##")?"h2":"";return e.jsx("li",{className:"document-toc-item",children:e.jsx("a",{href:`#${n}`,className:`document-toc-link ${a}`,"aria-current":N===n?"true":void 0,children:n})},s)})})]})})})}),e.jsx("section",{className:"place side"})]})]}),e.jsx("main",{className:"main-content",children:e.jsx("article",{className:"main-page-content",lang:"zh-CN",children:e.jsx(r.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(R,{file:o,fold:i,writer:y,firstDate:C,lastDate:E,desc:$},D)})})})]})};export{q as default};
